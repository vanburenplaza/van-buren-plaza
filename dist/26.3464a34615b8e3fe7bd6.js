(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[26,30,31,33,27,38],{1e3:function(e,t,r){"use strict";var n,i,a;r.d(t,{i2:function(){return n},uI:function(){return i},FU:function(){return a}}),function(e){e.hover="hover",e.scroll="scroll"}(n||(n={})),function(e){e.horizontally="horizontally",e.vertically="vertically"}(i||(i={})),function(e){e.bottom="bottom",e.center="center",e.top="top"}(a||(a={}))},1059:function(e,t,r){"use strict";r.d(t,{n:function(){return i}});var n=r(352),i=r.n(n)().createContext({model:{pageScale:1,pageContentTop:0,magContainerHeight:0,widgetBoxTop:0,isStarted:!1,canBeUsed:!0,isSelected:!1}})},1057:function(e,t,r){"use strict";var n=r(660),i=r(352),a=r.n(i),o=r(793),s=r(674),l=r(308),c=r(704),d=r(711),h=r(751),u=r.n(h),p=r(677);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f,g,y=(f=p.breakpoints,g=1,function(e){if(Array.isArray(e))return e}(f)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}(f,g)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(f,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],w=(0,n.default)(u()).withConfig({displayName:"RmFooter___StyledText"})(["display:inline-block;text-decoration:none;font-style:normal;&:hover{color:",";}"],(function(e){return e._css})),b=function(e){var t=e.label,r=e.url,n=e.showComma,i=e.isMobile;return a().createElement(a().Fragment,null,a().createElement(w,{as:"a",fontFamily:"Graphik",color:"darkGray",fontWeight:400,fontSize:12,letterSpacing:-.04,lineHeight:i?"1":"24px",href:r,_css:(0,c.themeGet)("colors.orange")},t),n&&a().createElement(u(),{fontFamily:"Graphik",color:"darkGray",fontWeight:400,fontSize:12,letterSpacing:-.04,lineHeight:i?"1":"24px"},","," "))},v=(0,n.default)(u()).withConfig({displayName:"RmFooter___StyledText2"})(["font-style:normal;"]),_=(0,n.default)(d.Box).withConfig({displayName:"RmFooter___StyledBox"})(["",""],(function(e){return e._css2})),x=(0,n.default)(u()).withConfig({displayName:"RmFooter___StyledText3"})(["display:inline-block;text-decoration:none;font-style:normal;&:hover{color:",";}"],(function(e){return e._css3})),S=function(e){var t=e.items,r=e.width,n=e.title,i=e.isMobile;return a().createElement(d.Box,{width:r},a().createElement(d.Box,{borderBottom:"1px solid rgba(128, 128, 128, 0.24)",pb:"6px",mb:"16px"},a().createElement(v,{fontFamily:"Graphik",fontWeight:400,fontSize:16,letterSpacing:-.04,lineHeight:"24px",color:"darkGray"},n)),a().createElement(_,{_css2:t.length>1&&!i?"display: flex; align-items: flex-start; justify-content: space-between;":""},t.map((function(e,r){return a().createElement(d.Box,{key:"ul-".concat(r),mb:i&&e.mobileSeparator?36:void 0},e.items.map((function(e,n){return a().createElement(d.Box,{mr:t.length-1!==r||i?void 0:30,key:"ul-".concat(r,"-li-").concat(n)},a().createElement(x,{as:"a",href:e.url,color:"white",fontFamily:"Graphik",fontWeight:400,fontSize:16,letterSpacing:-.04,lineHeight:"24px",_css3:(0,c.themeGet)("colors.orange")},e.label))})))}))))},k=(0,n.default)(d.Box).withConfig({displayName:"RmFooter___StyledBox2"})([""," ",""],(function(e){return e._css4}),(function(e){return e._css5})),T=(0,n.default)(d.Flex).withConfig({displayName:"RmFooter___StyledFlex"})(["",""],(function(e){return e._css6})),O=(0,n.default)(d.Flex).withConfig({displayName:"RmFooter___StyledFlex2"})(["",""],(function(e){return e._css7}));t.Z=function(){var e=l.ZP.readymag_host,t=(0,i.useContext)(s.BackboneContext).model;return a().createElement(o.default,{query:"(min-width: ".concat(y,")")},(function(r){var n=t&&t.isMobileViewport||!r;return a().createElement(k,{bg:"rgb(40, 40, 40)",height:"100%",width:"100%",_css4:t&&t.transform?"padding: 0 !important; transform: ".concat(t.transform,";"):"",_css5:t&&t.zoom?"zoom: ".concat(t.zoom,";"):""},a().createElement(d.Box,{m:"0 auto",width:n?"100%":1024,height:"100%",p:"58px 20px 16px"},a().createElement(T,{alignItems:"flex-start",justifyContent:"space-between",mb:n?76:38,_css6:n?"display: block":""},a().createElement(S,{title:"Company",isMobile:n,width:n?"100%":230,items:[{mobileSeparator:!0,items:[{label:"About",url:"".concat(e,"/about/")},{label:"R/masters",url:"".concat(e,"/examples/r-masters")}]}]}),a().createElement(S,{title:"News",isMobile:n,width:n?"100%":482,items:[{mobileSeparator:!0,items:[{label:"Product updates",url:"https://medium.com/readymag/product-updates/home"},{label:"Subscribe to newsletter",url:"http://subscribe.readymag.com/"},{label:"Medium",url:"https://medium.com/readymag"}]},{mobileSeparator:!1,items:[{label:"Facebook",url:"https://www.facebook.com/readymag"},{label:"Twitter",url:"https://twitter.com/readymag"},{label:"Are.na",url:"https://www.are.na/readymag"}]},{mobileSeparator:!0,items:[{label:"Dribbble",url:"https://dribbble.com/readymag"},{label:"Instagram",url:"https://www.instagram.com/readymag/"},{label:"Pinterest",url:"https://www.pinterest.ru/readymagpins/boards/"}]}]}),a().createElement(S,{title:"Support",isMobile:n,width:n?"100%":230,items:[{items:[{label:"Templates",url:"".concat(e,"/templates")},{label:"Help",url:"https://help.readymag.com/"},{label:"support@readymag.com",url:"mailto:support@readymag.com"}]}]})),a().createElement(O,{alignItems:"flex-start",_css7:n?"display: block;":""},a().createElement(d.Box,{width:n?"100%":252},a().createElement(u(),{fontFamily:"Graphik",color:"darkGray",fontWeight:400,fontSize:12,letterSpacing:-.04,lineHeight:n?"1":"24px"},"Â© ",(new Date).getFullYear()," Readymag Inc.")),a().createElement(d.Box,{width:n?"100%":""},a().createElement(b,{label:"Terms of service",url:"".concat(e,"/readymag/terms-and-privacy/"),showComma:!0,isMobile:n}),a().createElement(b,{label:"Privacy policy",url:"".concat(e,"/readymag/terms-and-privacy/2/"),isMobile:n})))))}))}},1058:function(e,t,r){"use strict";r.r(t);var n=r(1012),i=r(352),a=r.n(i),o=r(336),s=r.n(o),l=r(674),c=r(1059),d=r(1e3);function h(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){g(a,n,i,o,s,"next",e)}function s(e){g(a,n,i,o,s,"throw",e)}o(void 0)}))}}var w,b,v,_=n.Z.extend({triggerWidgets:[],initialize:function(e){this.model=new(s().Model)(e),n.Z.prototype.initialize.apply(this,arguments)},render:(v=y(regeneratorRuntime.mark((function e(){var t,n,i,o,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.basePath&&this.numberOfImages){e.next=2;break}return e.abrupt("return");case 2:return this.makeBox("widget-shots"),e.next=5,Promise.resolve().then(r.bind(r,674));case 5:return t=e.sent,n=t.renderReact,e.next=9,Promise.all([r.e(20),r.e(21),r.e(24)]).then(r.bind(r,1127));case 9:return i=e.sent,o=i.Shots,this.stateModel=new(s().Model)(this.getCurrentState()),n({component:function(){return a().createElement(l.CreateContextProvider,{context:c.n,model:d.stateModel},a().createElement(o,{mode:window.RM.screenshot?"screenshoter":"viewer",onFirstRender:d.onFirstRender,onFirstFrameLoaded:d.widgetIsLoaded}))},domElement:this.el,model:this.model}),e.abrupt("return",this);case 15:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),getCurrentState:function(){return{pageScale:this.page.scale,pageContentTop:this.page.contentPosition.top,magContainerHeight:this.page.mag.getContainerSizeCached().height,widgetBoxTop:this.calcBoxStyle({calcBBox:!0}).dimensions.top}},getViewerType:function(){return this.page.mag&&this.page.mag.viewOpts&&this.page.mag.viewOpts.viewertype||"vertical"},onFirstRender:function(){var e;(this.rendered=!0,this._scheduleStart&&this.start(),this.playbackType===d.i2.scroll)&&(e=this.isAbove()&&"vertical"===this.getViewerType()?this.page.mag.getScroll():this.page.getScroll(),this.handleScroll(e))},handleScroll:function(e){this.rendered&&this.stateModel.set(m(m({},this.getCurrentState()),{},{currentScrollOffset:e}))},handlePointerMovement:function(e){if(this.rendered){"touches"in e&&"horizontal"===this.getViewerType()&&this.hoverDirection===d.uI.horizontally&&e.stopPropagation();var t="touches"in e?e.touches[0].clientX:e.clientX,r="touches"in e?e.touches[0].clientY:e.clientY,n=e.target;if(n){var i=n.getBoundingClientRect(),a=Modernizr.firefox?1:this.page.scale,o=t/a-i.left,s=r/a-i.top;this.hoverDirection===d.uI.horizontally?this.stateModel.set({hoverPercent:o/i.width}):this.hoverDirection===d.uI.vertically&&this.stateModel.set({hoverPercent:s/i.height})}}},getTriggerWidgets:(b=y(regeneratorRuntime.mark((function e(){var t,r,n,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=h(this.triggers),e.prev=2,i=regeneratorRuntime.mark((function e(){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,i=void 0,e.prev=2,e.next=5,a.page.mag.getWidgetById(r,a.page);case 5:i=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return","continue");case 11:if(i){e.next=13;break}return e.abrupt("return","continue");case 13:if(!i.rendered){e.next=17;break}t.push(i),e.next=20;break;case 17:return e.next=19,new Promise((function(e){return a.listenToOnce(i,"rendered",e)}));case 19:t.push(i);case 20:case"end":return e.stop()}}),e,null,[[2,8]])})),r.s();case 5:if((n=r.n()).done){e.next=12;break}return e.delegateYield(i(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),r.e(e.t1);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return t.length||t.push(this),e.abrupt("return",t);case 22:case"end":return e.stop()}}),e,this,[[2,14,17,20]])}))),function(){return b.apply(this,arguments)}),bindTriggers:(w=y(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTriggerWidgets();case 2:this.triggerWidgets=e.sent,this.triggerWidgets.forEach((function(e){e.el instanceof HTMLElement&&(e.el.addEventListener("mousemove",t.handlePointerMovement),e.el.addEventListener("touchmove",t.handlePointerMovement))}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)}),unbindTriggers:function(){var e=this;this.triggerWidgets.forEach((function(t){t.el instanceof HTMLElement&&(t.el.removeEventListener("mousemove",e.handlePointerMovement),t.el.removeEventListener("touchmove",e.handlePointerMovement))}))},start:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.Z.prototype.start.apply(this,r),this.rendered?(this.playbackType===d.i2.scroll?this.isAbove()&&"vertical"===this.getViewerType()?this.listenTo(this.page.mag,"mag scroll",this.handleScroll):this.listenTo(this.page,"page scroll",this.handleScroll):this.playbackType===d.i2.hover&&this.bindTriggers(),setTimeout((function(){e.stateModel.set({isStarted:!0})}),1)):this._scheduleStart=!0},stop:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.Z.prototype.stop.apply(this,t),this.rendered&&(this.stopListening(),this.unbindTriggers(),this.stateModel.set({isStarted:!1}))},destroy:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.Z.prototype.destroy.apply(this,t)}});t.default=_},1028:function(e,t,r){"use strict";var n,i,a,o,s=r(349);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.Z=(l(o={},"template-constructor-block-facebook-type_like_button",(0,s.f)(n||(n=c(['\n\t<div class="fb-like fb" data-href="<%-data.url ? data.url : \'http://readymag.com\'%>" <%=data.share_button || data.send_button ? \'data-share="true"\' : \'\'%> data-width="<%=data.w%>" data-show-faces="<%=data.show_faces%>" data-colorscheme="<%=data.theme%>" data-layout="<%=data.layout%>" data-type="data.type_like_button"></div>\n\t<div class="overlay"></div>\n'])))),l(o,"template-constructor-block-facebook-type_page",(0,s.f)(i||(i=c(['\n\t<div class="fb-page fb" data-href="<%-data.url ? data.url : \'https://www.facebook.com/readymag\'%>" data-width="<%=data.w%>" data-height="<%=data.h%>" data-show-facepile="<%=data.show_faces%>" data-colorscheme="<%=data.theme%>" data-tabs="<%=data.show_stream ? \'timeline, events, messages\' : \'\'%>" data-show-border="true" data-small-header="<%=data.small_header%>" data-adapt-container-width="true"></div>\n\t<div class="overlay"></div>\n'])))),l(o,"template-constructor-block-facebook-type_comments",(0,s.f)(a||(a=c(['\n\t<div class="fb-comments fb" data-href="<%-data.url ? data.url : \'http://readymag.com\'%>" data-width="<%=data.w%>" data-num-posts="<%=data.num_posts%>" data-colorscheme="<%=data.theme%>"></div>\n\t<div class="overlay"></div>\n'])))),o)},1048:function(e,t,r){"use strict";var n,i,a,o,s,l,c=r(349);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.Z=(d(l={},"template-constructor-block-twitter-type_tweet",(0,c.f)(n||(n=h(['\n\t<a href="https://twitter.com/share" class="twitter-share-button" data-url="<%-url%>" data-lang="en" data-size="<%=large_button ? \'large\' : \'medium\'%>" data-text="<%- typeof text !== \'undefined\' ? text : \'\'%>">Tweet</a>\n\t<div class="overlay"></div>\n'])))),d(l,"template-constructor-block-twitter-type_follow",(0,c.f)(i||(i=h(['\n\t<a href="https://twitter.com/<%-username ? username : \'Readymag\'%>" class="twitter-follow-button" data-show-count="false" data-show-screen-name="<%=show_name ? \'true\' : \'false\'%>" data-lang="en" data-size="<%=large_button ? \'large\' : \'medium\'%>">Follow @<%-username%></a>\n\t<div class="overlay"></div>\n'])))),d(l,"template-constructor-block-twitter-type_hashtag",(0,c.f)(a||(a=h(['\n\t<a href="https://twitter.com/intent/tweet?button_hashtag=<%-hash%>" class="twitter-hashtag-button" data-size="<%=large_button ? \'large\' : \'medium\'%>">Tweet #<%-hash%></a>\n\t<div class="overlay"></div>\n'])))),d(l,"template-constructor-block-twitter-type_timeline",(0,c.f)(o||(o=h(['\n\t<%=code%>\n\t<div class="overlay"></div>\n'])))),d(l,"template-constructor-block-twitter-type_embed",(0,c.f)(s||(s=h(['\n\t<%=code%>\n\t<div class="overlay"></div>\n'])))),l)},1025:function(e,t,r){"use strict";r.r(t);var n=r(312),i=r(1023),a=r(1026),o=r.n(a),s=r(340),l=r(308),c=i.default.extend({initialize:function(){i.default.prototype.initialize.apply(this,arguments),this.is_above&&this.mag.on("destroyed",this.destroy)},render:function(){var e=this,t=!1;if(RM.screenshot)window.ServerData.userPermissions&&window.ServerData.userPermissions.can_use_e_commerce&&(t=!0);else{var r=RM.viewerRouter?RM.viewerRouter.getUserPermissions():RM.constructorRouter.me.get("permissions");r&&r.can_use_e_commerce&&(t=!0)}if(t){if(i.default.prototype.render.apply(this,arguments),!RM.screenshot){this.mag.eCommerceManager.events.on("ecommerce:cartdata:changed",this.renderTotalItems);var n=this["font-family"];if(n&&!l.ZP.systemFontsList.includes(n.toLowerCase())){var a=new(o())(this["font-family"]);a.load().then((function(){e.renderTotalItems(e.mag.eCommerceManager.getCartData())})).catch((function(){e.renderTotalItems(e.mag.eCommerceManager.getCartData())}))}else this.renderTotalItems(this.mag.eCommerceManager.getCartData())}return this}},renderTotalItems:function(e){if(e&&(e.skus||e.prices)){var t=0;for(var r in e.skus)e.skus.hasOwnProperty(r)&&(t+=e.skus[r].cart_count);for(var n in e.prices)e.prices.hasOwnProperty(n)&&(t+=e.prices[n].cart_count);var i=t?"".concat(this.text||""," ").concat(t):this.text||"",a=this.recalcTextInputSize(i);this.renderButtonTextWithSizes(i,a)}},onButtonClick:function(){this.mag.eCommerceManager.changeCartSidebarVisibility()},recalcTextInputSize:function(e){var t,r,i,a,o=this["font-size"],l=this["letter-spacing"],c=this["font-family"],d=this["font-style"],h=this["font-weight"];return this.$textInputSizeAdjuster||(this.$textInputSizeAdjuster=(0,n.Z)("<div/>"),this.$textInputSizeAdjuster.css({position:"absolute",left:"-9999px",top:"-9999px","white-space":"pre",width:"auto"}),(0,n.Z)(document.getElementById("tmp")).append(this.$textInputSizeAdjuster)),this.$textInputSizeAdjuster.addClass("for-text-size-calc").addClass(s.default.generateUUID()),this.$textInputSizeAdjuster.text(e.trim()),this.$textInputSizeAdjuster.css({"font-family":c,"font-style":d,"font-weight":h,"font-size":o+"px","letter-spacing":l+"px"}),t=this.$textInputSizeAdjuster.width(),r=this.$textInputSizeAdjuster.height(),this.$textInputSizeAdjuster.css("letter-spacing",0).text("M"),i=this.$textInputSizeAdjuster.width(),i=2*Math.ceil(i/2),a=this.$textInputSizeAdjuster.height(),0===e.length&&(t=i,r=a),t=2*Math.ceil(t/2),{text_w:t+=i,text_h:r=2*Math.ceil(r/2)}},destroy:function(){return this.mag.eCommerceManager.events.off("ecommerce:cartdata:changed",this.renderTotalItems),this.$textInputSizeAdjuster&&(this.$textInputSizeAdjuster.remove(),this.$textInputSizeAdjuster=null),i.default.prototype.destroy.apply(this,arguments)}});t.default=c},1027:function(e,t,r){"use strict";r.r(t);var n=r(321),i=r(1012),a=r(341),o=r(1028),s=i.Z.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,initialize:function(){return i.Z.prototype.initialize.apply(this,arguments),"type_like_box"===this.current_type&&(this.current_type="type_page",this.type_page=this.type_like_box),this},render:function(){return this.makeBox("widget-facebook"),this.rendered=!0,this.started?this.start():!RM.screenshot&&this.widgetIsLoaded(),this},start:function(){if(this.started=!0,this.destroyed||!this.rendered||this.innerRendered)return this;this.innerRendered=!0;var e,t,r=this;return this.current_type?((t=this[this.current_type]).w=this.w,t.h=this.h,"mag"===t.use_own_url?t.url=this.page.mag.getUrl():"page"!==t.use_own_url&&t.url||(t.url=this.page.getUrl()),e=o.Z["template-constructor-block-facebook-"+this.current_type],this.$el.html(e({data:t})).removeClass(["type_like_button","type_page","type_comments"].join(" ")).addClass(this.current_type),"type_comments"===this.current_type?this.$el.css({"overflow-x":"hidden","overflow-y":"auto"}):"type_like_button"!==this.current_type&&this.$el.css({overflow:"hidden"}),a.Z.initFacebookAPI((function(){!r.destroyed&&r.innerRendered&&window.FB.XFBML.parse(r.$el.get(0),(function(){n.Z.delay((function(){!r.destroyed&&r.innerRendered&&(r.widgetIsLoaded(),"type_like_button"===r.current_type&&(r.iframe_w=r.$("iframe").width(),r.iframe_h=r.$("iframe").height()))}),500)}))})),this):(this.widgetIsLoaded(),this)},stop:function(){return this.started=!1,this}});t.default=s},1032:function(e,t,r){"use strict";r.r(t);var n=r(312),i=r(321),a=r(1012),o=r(341),s=r(710),l=a.Z.extend({DO_NOT_WAIT_FOR_PRELOAD:!0,render:function(){this.makeBox("widget-gmaps"),this.$el.html((0,n.Z)('<div class="map-container"></div>')),this.rendered=!0;var e=this.api_key;return this.mag&&this.mag.opts&&this.mag.opts.gmaps_key&&this.mag.opts.gmaps_key!==this.api_key&&(e=this.mag.opts.gmaps_key),o.Z.initGMapsAPI(e,function(){this.destroyed||i.Z.defer(function(){this.destroyed||(s.Z.isOn(this.page.pageViewport,this.mag.getViewportWidth(this.page.pageViewport),this.mag.opts)&&this.scale(),this.map=new google.maps.Map(this.$(".map-container").get(0),{zoom:this.map_zoom,center:new google.maps.LatLng(this.center_lat,this.center_lng),mapTypeId:this.map_type_id||google.maps.MapTypeId.ROADMAP,disableDefaultUI:!this.show_controls,streetViewControl:!1,scrollwheel:void 0===this.scrollwheel||!!this.scrollwheel}),this.marker_lat&&this.marker_lng&&"directions"!==this.current_type&&(this.marker=new google.maps.Marker({map:this.map,position:new google.maps.LatLng(this.marker_lat,this.marker_lng)}),google.maps.event.addListener(this.marker,"click",function(){this.infowindow&&this.infowindow.open(this.map,this.marker)}.bind(this)),this.infowindow=new google.maps.InfoWindow({maxWidth:this.w-100}),this.formatted_address?this.infowindow.setContent(this.formatted_address):(new google.maps.Geocoder).geocode({latLng:new google.maps.LatLng(this.marker_lat,this.marker_lng)},function(e,t){t===google.maps.GeocoderStatus.OK&&e[0]&&this.infowindow.setContent(e[0].formatted_address)}.bind(this))),"directions"===this.current_type&&this.direction_start_lat&&this.direction_start_lng&&this.direction_end_lat&&this.direction_end_lng&&this.direction_route_type?(this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer({preserveViewport:!0}),this.directionsService.route({origin:new google.maps.LatLng(this.direction_start_lat,this.direction_start_lng),destination:new google.maps.LatLng(this.direction_end_lat,this.direction_end_lng),travelMode:google.maps.TravelMode[this.direction_route_type.toUpperCase()]},function(e,t){t===google.maps.DirectionsStatus.OK&&(this.directionsDisplay.setDirections(e),this.directionsDisplay.setMap(this.map),google.maps.event.addListener(this.map,"tilesloaded",function(){this.widgetIsLoaded()}.bind(this)))}.bind(this))):google.maps.event.addListener(this.map,"tilesloaded",function(){this.widgetIsLoaded()}.bind(this)),"custom"===this.current_type&&this.custom_json&&this.map.setOptions({styles:JSON.parse(this.custom_json)}))}.bind(this))}.bind(this)),this},scale:function(){var e=this.mag.getScale(this.page.pageViewport),t=this.$(".map-container");if(s.Z.isCSSZoom())t.css("zoom",1/e);else if(s.Z.isCSSTransform()){var r=100*e,n=(r-100)/2;t.css({transform:"scale("+1/e+") translate(-"+n+"%, -"+n+"%)",width:r+"%",height:r+"%"})}},start:function(){return this.started=!0,this.rendered&&!this.destroyed&&this.map?(google.maps.event.trigger(this.map,"resize"),this.map.setCenter(new google.maps.LatLng(this.center_lat,this.center_lng)),this):this},destroy:function(){return this.map&&google.maps.event.clearListeners(this.map,"tilesloaded"),this.marker&&google.maps.event.clearListeners(this.marker,"click"),a.Z.prototype.destroy.apply(this,arguments)}});t.default=l},1010:function(e,t,r){"use strict";r.r(t);var n=r(1011),i=r(1014),a=r(1018),o=r(1023),s=r(1025),l=r(1027),c=r(1029),d=r(1031),h=r(1032),u=r(1033),p=r(1039),m=r(1043),f=r(1044),g=r(1046),y=r(1047),w=r(1021),b=r(1049),v=r(1056),_=r(1058);t.default={addtocart:n.default,audio:i.default,background:a.default,button:o.default,ecommercecart:s.default,facebook:l.default,form:c.default,picture:d.default,gmaps:h.default,hotspot:u.default,iframe:p.default,shape:m.default,slideshow:f.default,text:g.default,twitter:y.default,video:w.default,rmheader:b.default,rmfooter:v.default,shots:_.default}},1056:function(e,t,r){"use strict";r.r(t);var n=r(312),i=r(600),a=r.n(i),o=r(1012),s=r(710),l=r(674),c=r(1057);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=o.Z.extend({ignoreScale:!0,render:function(){return this.makeBox("widget-rm-footer"),(0,n.Z)(".widget-rm-footer").css({background:"rgb(40, 40, 40)"}),this.propsModel=new Backbone.Model(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isMobileViewport:!1},this.getStyles())),this.$footer=(0,n.Z)("<div>").appendTo(this.$el).get(0),(0,l.renderReact)({component:c.Z,domElement:this.$footer,model:this.propsModel}),this.rendered=!0,this.widgetIsLoaded(),this},destroy:function(){return a().unmountComponentAtNode(this.$footer),o.Z.prototype.destroy.apply(this,arguments)},getStyles:function(){var e=this.mag.getViewportWidth(this.page.pageViewport);if(s.Z.isOn(this.page.pageViewport,e,this.mag.viewOpts)){var t=1/s.Z.getRatio(e),r=s.Z.isCSSZoom(),n=s.Z.isCSSTransform();return{zoom:r?"".concat(t):null,transform:n?"scale(".concat(t,")"):null}}},onPageResize:function(){o.Z.prototype.onPageResize.apply(this,arguments),this.propsModel.set(this.getStyles())}});t.default=u},1047:function(e,t,r){"use strict";r.r(t);var n=r(321),i=r(1012),a=r(867),o=r(341),s=r(1048),l=i.Z.extend({CONTENT_WAIT_TICK:100,CONTENT_WAIT_MAX_TICKS:20,CONTENT_IMG_WAIT:1e3,DO_NOT_WAIT_FOR_PRELOAD:!0,render:function(){var e,t;return this.makeBox("widget-twitter"),this.rendered=!0,this.current_type?("mag"===(t=this[this.current_type]).use_own_url?t.url=this.page.mag.getUrl():"page"!==t.use_own_url&&t.url||(t.url=this.page.getUrl()),RM.screenshot||(t.text=a.getFinalShare(this.page,n.Z.extend(this.page.mag.model.toJSON(),{user:this.page.mag.user}),{forProject:"mag"===t.use_own_url,customDomain:RM.common.isDomainViewer}).tweet),e=s.Z["template-constructor-block-twitter-"+this.current_type],this.$el.html(e(t)),"type_timeline"===this.current_type&&this.$el.find("a").attr({width:this.w,height:this.h}),o.Z.initTwitterAPI(function(){this.destroyed||(window.twttr&&window.twttr.widgets&&n.Z.isFunction(window.twttr.widgets.load)&&window.twttr.widgets.load(),(0,n.Z)(["type_timeline","type_embed"]).contains(this.current_type)?this.waitForTwitterContent():this.widgetIsLoaded())}.bind(this)),this):(this.widgetIsLoaded(),this)},waitForTwitterContent:function(){var e,t,r,i=0,a=!1,o={type_timeline:".timeline-Widget",type_embed:"blockquote.tweet"};clearInterval(e),e=setInterval(n.Z.bind((function(){i++,this.destroyed?clearInterval(e):(1==(t=this.$el.find("iframe")).length&&(r=o[this.current_type],a=t.contents().find(r).length>0),(a||i>this.CONTENT_WAIT_MAX_TICKS)&&("type_embed"==this.current_type&&t.css({margin:0,"max-width":"100%"}),"type_timeline"==this.current_type&&(console.log("$frame : ",t),t.css({width:"100%",height:"100%!important","max-width":"100%"})),clearInterval(e),setTimeout(n.Z.bind((function(){this.widgetIsLoaded()}),this),this.CONTENT_IMG_WAIT)))}),this),this.CONTENT_WAIT_TICK)}});t.default=l},1026:function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function r(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.a.offsetWidth,r=t+100;return e.f.style.width=r+"px",e.c.scrollLeft=r,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function a(e,r){function n(){var e=a;i(e)&&e.a.parentNode&&r(e.g)}var a=e;t(e.b,n),t(e.c,n),i(e)}function o(e,t){var r=t||{};this.family=e,this.style=r.style||"normal",this.weight=r.weight||"normal",this.stretch=r.stretch||"normal"}var s=null,l=null,c=null,d=null;function h(){return null===d&&(d=!!document.fonts),d}function u(){if(null===c){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}c=""!==e.style.font}return c}function p(e,t){return[e.style,e.weight,u()?e.stretch:"","100px",t].join(" ")}o.prototype.load=function(e,t){var i=this,o=e||"BESbswy",c=0,d=t||3e3,u=(new Date).getTime();return new Promise((function(e,t){if(h()&&!function(){if(null===l)if(h()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!e&&603>parseInt(e[1],10)}else l=!1;return l}()){var m=new Promise((function(e,t){!function r(){(new Date).getTime()-u>=d?t(Error(d+"ms timeout exceeded")):document.fonts.load(p(i,'"'+i.family+'"'),o).then((function(t){1<=t.length?e():setTimeout(r,25)}),t)}()})),f=new Promise((function(e,t){c=setTimeout((function(){t(Error(d+"ms timeout exceeded"))}),d)}));Promise.race([f,m]).then((function(){clearTimeout(c),e(i)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function l(){var t;(t=-1!=g&&-1!=y||-1!=g&&-1!=w||-1!=y&&-1!=w)&&((t=g!=y&&g!=w&&y!=w)||(null===s&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(g==b&&y==b&&w==b||g==v&&y==v&&w==v||g==_&&y==_&&w==_)),t=!t),t&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(c),e(i))}var h=new r(o),m=new r(o),f=new r(o),g=-1,y=-1,w=-1,b=-1,v=-1,_=-1,x=document.createElement("div");x.dir="ltr",n(h,p(i,"sans-serif")),n(m,p(i,"serif")),n(f,p(i,"monospace")),x.appendChild(h.a),x.appendChild(m.a),x.appendChild(f.a),document.body.appendChild(x),b=h.a.offsetWidth,v=m.a.offsetWidth,_=f.a.offsetWidth,function e(){if((new Date).getTime()-u>=d)x.parentNode&&x.parentNode.removeChild(x),t(Error(d+"ms timeout exceeded"));else{var r=document.hidden;!0!==r&&void 0!==r||(g=h.a.offsetWidth,y=m.a.offsetWidth,w=f.a.offsetWidth,l()),c=setTimeout(e,50)}}(),a(h,(function(e){g=e,l()})),n(h,p(i,'"'+i.family+'",sans-serif')),a(m,(function(e){y=e,l()})),n(m,p(i,'"'+i.family+'",serif')),a(f,(function(e){w=e,l()})),n(f,p(i,'"'+i.family+'",monospace'))}))}))},e.exports=o}()}}]);