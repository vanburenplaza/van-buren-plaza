(self.webpackChunkrm_frontend=self.webpackChunkrm_frontend||[]).push([[29],{1016:function(){(function(){var requirejs,require,define,__inflate;(function(t){function e(t,e){var i,n,s,a,r,o,l,h=e&&e.split("/"),u=c.map,d=u&&u["*"]||{};if(t&&"."===t.charAt(0)&&e){for(t=(h=h.slice(0,h.length-1)).concat(t.split("/")),r=0;l=t[r];r++)if("."===l)t.splice(r,1),r-=1;else if(".."===l){if(1===r&&(".."===t[2]||".."===t[0]))return!0;r>0&&(t.splice(r-1,2),r-=2)}t=t.join("/")}if((h||d)&&u)for(r=(i=t.split("/")).length;r>0;r-=1){if(n=i.slice(0,r).join("/"),h)for(o=h.length;o>0;o-=1)if((s=u[h.slice(0,o).join("/")])&&(s=s[n])){a=s;break}if(a=a||d[n]){i.splice(0,r,a),t=i.join("/");break}}return t}function i(e,i){return function(){return l.apply(t,p.call(arguments,0).concat([e,i]))}}function n(t){return function(e){h[t]=e}}function s(e){if(u.hasOwnProperty(e)){var i=u[e];delete u[e],d[e]=!0,o.apply(t,i)}if(!h.hasOwnProperty(e))throw new Error("No "+e);return h[e]}function a(t,i){var n,a,r=t.indexOf("!");return-1!==r?(n=e(t.slice(0,r),i),t=t.slice(r+1),t=(a=s(n))&&a.normalize?a.normalize(t,function(t){return function(i){return e(i,t)}}(i)):e(t,i)):t=e(t,i),{f:n?n+"!"+t:t,n:t,p:a}}function r(t){return function(){return c&&c.config&&c.config[t]||{}}}var o,l,h={},u={},c={},d={},p=[].slice;o=function(e,o,l,c){var p,f,y,m,g,v,w=[];if(c=c||e,"string"==typeof l&&(l=__inflate(e,l)),"function"==typeof l){for(o=!o.length&&l.length?["require","exports","module"]:o,v=0;v<o.length;v++)if("require"===(y=(g=a(o[v],c)).f))w[v]=i(e);else if("exports"===y)w[v]=h[e]={},p=!0;else if("module"===y)f=w[v]={id:e,uri:"",exports:h[e],config:r(e)};else if(h.hasOwnProperty(y)||u.hasOwnProperty(y))w[v]=s(y);else if(g.p)g.p.load(g.n,i(c,!0),n(y),{}),w[v]=h[y];else if(!d[y])throw new Error(e+" missing "+y);m=l.apply(h[e],w),e&&(f&&f.exports!==t&&f.exports!==h[e]?h[e]=f.exports:m===t&&p||(h[e]=m))}else e&&(h[e]=l)},requirejs=require=l=function(e,i,n,r){return"string"==typeof e?s(a(e,i).f):(e.splice||(c=e,i.splice?(e=i,i=n,n=null):e=t),i=i||function(){},r?o(t,e,i,n):setTimeout((function(){o(t,e,i,n)}),15),l)},l.config=function(t){return c=t,l},(define=function(t,e,i){e.splice||(i=e,e=[]),u[t]=[t,e,i]}).amd={jQuery:!0}})(),__inflate=function __inflate(name,src){var r;return eval(["r = function(a,b,c){","\n};\n//@ sourceURL="+name+"\n"].join(src)),r},define("lib/api/events",["require","exports","module"],(function(t,e,i){e.api={LOAD_PROGRESS:"loadProgres",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",SHARE:"share",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked"},e.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}})),define("lib/api/getters",["require","exports","module"],(function(t,e,i){i.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}})),define("lib/api/setters",["require","exports","module"],(function(t,e,i){i.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}})),define("lib/api/api",["require","exports","module","lib/api/events","lib/api/getters","lib/api/setters"],(function(t,e,i){function n(t){var e,i=!1;for(e in _)if(_.hasOwnProperty(e)&&_[e]===t){i=!0;break}return i}function s(t){var e,i;for(e=0,i=C.length;e<i&&!1!==t(C[e]);e++);}function a(t){return t.contentWindow?t.contentWindow:t.contentDocument&&"parentWindow"in t.contentDocument?t.contentDocument.parentWindow:null}function r(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i}function o(t,e,i){i.callbacks[t]=i.callbacks[t]||[],i.callbacks[t].push(e)}function l(t,e){var i=!0;return e.callbacks[t]=[],s((function(e){if((e.callbacks[t]||[]).length)return i=!1,!1})),i}function h(t,e,i){var n,s,r=a(i);if(!r.postMessage)return!1;n=i.getAttribute("src").split("?")[0],s=JSON.stringify({method:t,value:e}),"//"===n.substr(0,2)&&(n=window.location.protocol+n),n=n.replace(/http:\/\/(w|wt).soundcloud.com/,"https://$1.soundcloud.com"),r.postMessage(s,n)}function u(t){var e;return s((function(i){if(i.instance===t)return e=i,!1})),e}function c(t){var e;return s((function(i){if(a(i.element)===t)return e=i,!1})),e}function d(t,e){return function(i){var n=function(t){return!!(t&&t.constructor&&t.call&&t.apply)}(i),s=u(this),a=!n&&e?i:null,r=n&&!e?i:null;return r&&o(t,r,s),h(t,a,s.element),this}}function p(t,e,i){var n,s,a;for(n=0,s=e.length;n<s;n++)t[a=e[n]]=d(a,i)}function f(t,e,i){return t+"?url="+e+"&"+function(t){var e,i,n=[];for(e in t)t.hasOwnProperty(e)&&(i=t[e],n.push(e+"="+("start_track"===e?parseInt(i,10):i?"true":"false")));return n.join("&")}(i)}function y(t,e,i){var s,a,r=t.callbacks[e]||[];for(s=0,a=r.length;s<a;s++)r[s].apply(t.instance,i);(n(e)||e===P.READY)&&(t.callbacks[e]=[])}function m(t){var e,i,n,s,a;try{i=JSON.parse(t.data)}catch(t){}if(i&&(!t.origin||/soundcloud/i.test(t.origin))){if(e=c(t.source),n=i.method,s=i.value,n===P.READY&&(e?(e.isReady=!0,y(e,T),l(T,e)):M.push(t.source)),n===P.PLAY&&!e.playEventFired&&(e.playEventFired=!0),n===P.PLAY_PROGRESS&&!e.playEventFired&&(e.playEventFired=!0,y(e,P.PLAY,[s])),!e||g(t.origin)!==g(e.domain))return!1;a=[],void 0!==s&&a.push(s),y(e,n,a)}}function g(t){return t.replace(S,"")}var v,w,b,k=t("lib/api/events"),_=t("lib/api/getters"),E=t("lib/api/setters"),P=k.api,$=k.bridge,M=[],C=[],T="__LATE_BINDING__",S=/^http(?:s?)/;window.addEventListener?window.addEventListener("message",m,!1):window.attachEvent("onmessage",m),i.exports=b=function(t,e,i){if(function(t){return!!(""===t||t&&t.charCodeAt&&t.substr)}(t)&&(t=document.getElementById(t)),!function(t){return!!t&&1===t.nodeType&&"IFRAME"===t.nodeName.toUpperCase()}(t))throw new Error("SC.Widget function should be given either iframe element or a string specifying id attribute of iframe element.");e&&(i=i||{},t.src=f("http://wt.soundcloud.dev:9200/",e,i));var n,s,r=c(a(t));return r&&r.instance?r.instance:(n=M.indexOf(a(t))>-1,s=new v(t),C.push(new w(s,t,n)),s)},b.Events=P,window.SC=window.SC||{},window.SC.Widget=b,w=function(t,e,i){this.instance=t,this.element=e,this.domain=function(t){var e,i,n,s="";for("//"===t.substr(0,2)&&(t=window.location.protocol+t),e=0,i=(n=t.split("/")).length;e<i&&e<3;e++)s+=n[e],e<2&&(s+="/");return s}(e.getAttribute("src")),this.isReady=!!i,this.callbacks={}},(v=function(){}).prototype={constructor:v,load:function(t,e){if(t){e=e||{};var i=this,n=u(this),s=n.element,a=s.src,r=a.substr(0,a.indexOf("?"));n.isReady=!1,n.playEventFired=!1,s.onload=function(){i.bind(P.READY,(function(){var t,i=n.callbacks;for(t in i)i.hasOwnProperty(t)&&t!==P.READY&&h($.ADD_LISTENER,t,n.element);e.callback&&e.callback()}))},s.src=f(r,t,e)}},bind:function(t,e){var i=this,n=u(this);return n&&n.element&&(t===P.READY&&n.isReady?setTimeout(e,1):n.isReady?(o(t,e,n),h($.ADD_LISTENER,t,n.element)):o(T,(function(){i.bind(t,e)}),n)),this},unbind:function(t){var e,i=u(this);i&&i.element&&(e=l(t,i),t!==P.READY&&e&&h($.REMOVE_LISTENER,t,i.element))}},p(v.prototype,r(_)),p(v.prototype,r(E),!0)})),window.SC=window.SC||{},window.SC.Widget=require("lib/api/api")})()},1017:function(){var t;t=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),window.soundcloud={version:"0.1",debug:!1,_listeners:[],_redispatch:function(t,e,i){var n,s=this._listeners[t]||[],a="soundcloud:"+t;try{n=this.getPlayer(e)}catch(n){return void(this.debug&&window.console&&console.error("unable to dispatch widget event "+t+" for the widget id "+e,i,n))}window.jQuery?jQuery(n).trigger(a,[i]):window.Prototype&&$(n).fire(a,i);for(var r=0,o=s.length;r<o;r+=1)s[r].apply(n,[n,i]);this.debug&&window.console&&console.log(a,t,e,i)},addEventListener:function(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)},removeEventListener:function(t,e){for(var i=this._listeners[t]||[],n=0,s=i.length;n<s;n+=1)i[n]===e&&i.splice(n,1)},getPlayer:function(e){var i;try{if(!e)throw"The SoundCloud Widget DOM object needs an id atribute, please refer to SoundCloud Widget API documentation.";if(i=t?window[e]:document[e]){if(i.api_getFlashId)return i;throw"The SoundCloud Widget External Interface is not accessible. Check that allowscriptaccess is set to 'always' in embed code"}throw"The SoundCloud Widget with an id "+e+" couldn't be found"}catch(t){throw console&&console.error&&console.error(t),t}},onPlayerReady:function(t,e){this._redispatch("onPlayerReady",t,e)},onMediaStart:function(t,e){this._redispatch("onMediaStart",t,e)},onMediaEnd:function(t,e){this._redispatch("onMediaEnd",t,e)},onMediaPlay:function(t,e){this._redispatch("onMediaPlay",t,e)},onMediaPause:function(t,e){this._redispatch("onMediaPause",t,e)},onMediaBuffering:function(t,e){this._redispatch("onMediaBuffering",t,e)},onMediaSeek:function(t,e){this._redispatch("onMediaSeek",t,e)},onMediaDoneBuffering:function(t,e){this._redispatch("onMediaDoneBuffering",t,e)},onPlayerError:function(t,e){this._redispatch("onPlayerError",t,e)}}},1015:function(t,e,i){"use strict";i.d(e,{Z:function(){return T}});var n=i(312),s=i(336),a=i.n(s),r=i(321);i(1016),i(1017);var o=window.SC,l=window.soundcloud;delete window.SC,delete window.soundcloud;var h,u,c,d,p,f,y=i(308),m=i(710),g=i(349);function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function w(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var b=(v(f={},"template-common-audio-player-standard",(0,g.f)(h||(h=w(['\n\t<iframe class="common-audio-player standard" width="100%" height="100%" scrolling="no" frameborder="no" src="<%-src%>"></iframe>\n'])))),v(f,"template-common-audio-player-minimal",(0,g.f)(u||(u=w(['\n\t<div class="common-audio-player minimal loading">\n\n\t\t<div class="sc-artwork-list">\n\t\t\t<div class="sc-loaded-artwork"></div>\n\t\t\t<div class="sc-artworks-overlay"></div>\n\t\t</div>\n\n\t\t<div class="sc-info">\n\t\t\t<h3></h3>\n\t\t\t<h4></h4>\n\t\t</div>\n\n\t\t<div class="sc-scrubber no-rmswipe">\n\t\t\t<div class="sc-hover-indicator"></div>\n\t\t\t<div class="sc-time-span">\n\t\t\t\t<div class="sc-buffer"></div>\n\t\t\t\t<div class="sc-played"></div>\n\t\t\t\t<div class="sc-button-wrapper">\n\t\t\t\t\t<div class="sc-button">\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="12" height="12"><path d="M0 0 L12 6 L0 12  Z " style="fill:#1d1a1b; stroke:none; stroke-width:0"></path></svg>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="sc-time-indicators">\n\t\t\t\t<span class="sc-left"></span>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n'])))),v(f,"template-common-audio-player-engine-html5",(0,g.f)(c||(c=w(['\n\t<div class="common-audio-player-engine">\n\t\t<audio preload="auto"></audio>\n\t</div>\n'])))),v(f,"template-common-audio-player-engine-flash",(0,g.f)(d||(d=w(['\n\t<div class="common-audio-player-engine">\n\t\t<object height="100%" width="100%" id="<%-id%>">\n\t\t\t<embed allowscriptaccess="always" height="100%" width="100%" src="<%=swf%>" type="application/x-shockwave-flash" name="<%-id%>" />\n\t    </object>\n\t</div>\n'])))),v(f,"template-common-audio-player-engine-flash-ie",(0,g.f)(p||(p=w(['\n\t<div class="common-audio-player-engine">\n\t\t<object height="100%" width="100%" id="<%-id%>" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="<%-swf%>">\n\t\t\t<param name="movie" value="<%-swf%>" />\n\t\t\t<param name="allowscriptaccess" value="always" />\n\t\t</object>\n\t</div>\n'])))),f),k=i(323),_=i(347),E=a().View.extend({initialize:function(t){var e=t.params,i=t.$container,n=t.readyCallback,s=t.viewport,a=t.viewportWidth,o=t.viewerOptions;r.Z.bindAll(this),this.params=e,this.$container=i,this.readyCallback=n||function(){},!(0,r.Z)(["standard","visual"]).contains(e.current_type)&&!Modernizr.opera||Modernizr.msie?this.player=new $({params:e,$container:i,readyCallback:n,parent:this,viewport:s,viewportWidth:a,viewerOptions:o}):this.player=new P({params:e,$container:i,readyCallback:n,parent:this}),this.render()},render:function(){this.player&&this.player.render()},show:function(){this.player&&this.player.show()},play:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},applyPlayerStyle:function(t){this.player&&this.player.applyPlayerStyle&&this.player.applyPlayerStyle(t)},destroy:function(){this.player&&(this.player.isDestroyed=!0,this.player&&this.player.destroy(),this.player=null)}}),P=a().View.extend({initialize:function(t){var e=t.params,i=t.$container,n=t.readyCallback,s=t.parent;r.Z.bindAll(this),this.inner_template=b["template-common-audio-player-standard"],this.parent=s,this.params=e,this.$container=i,this.readyCallback=n||function(){}},render:function(){var t=[];t.push("auto_play=false"),t.push("buying="+this.params.socials),t.push("liking="+this.params.socials),t.push("download="+this.params.socials),t.push("sharing="+this.params.socials),t.push("show_artwork="+this.params.artwork),t.push("show_comments="+this.params.comments),t.push("show_playcount="+this.params.playcount),t.push("color="+this.params.color),t.push("auto_advance=true"),t.push("show_user=true"),"visual"==this.params.current_type&&t.push("visual=true"),this.params.parsed_url=this.params.parsed_url.replace(/^http:/,"https:");var e=this.params.parsed_url+"&"+t.join("&");this.setElement((0,n.Z)(this.inner_template({src:e}))),this.$container.append(this.$el),this.player=o.Widget(this.$el[0]),this.player.bind("ready",r.Z.bind((function(){setTimeout(r.Z.bind((function(){this.readyCallback(this.parent)}),this),500)}),this)),setTimeout(r.Z.bind((function(){this.readyCallback(this.parent)}),this),2e3)},show:function(){this.$el&&this.$el.css("opacity",1)},play:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},destroy:function(){this.player.unbind("ready"),this.$el&&this.$el.remove(),this.player=null}}),$=a().View.extend({apiKey:y.ZP.SOUNDCLOUD_API,defaultCover:(0,_.findImagePath)("./common/audio-player/cover.png"),initialize:function(t){var e=t.params,i=t.$container,n=t.readyCallback,s=t.parent,a=t.viewport,o=t.viewportWidth,l=t.viewerOptions;r.Z.bindAll(this),this.inner_template=b["template-common-audio-player-minimal"],this.parent=s,this.params=e,this.$container=i,this.readyCallback=n||function(){},this.viewportWidth=o,this.viewport=a,this.viewerOptions=l,this.isHTHML5=this.html5AudioAvailable()},render:function(){this.setElement((0,n.Z)(this.inner_template({src:this.params.url}))),this.$container.append(this.$el),this.applyPlayerStyle(this.params),this.isHTHML5?this.audioEngine=new M(this.$container,this):this.audioEngine=new C(this.$container,this),this.loadTracksData([{url:this.params.url}])},applyPlayerStyle:function(t){this.$el&&(this.$el.toggleClass("no-artwork",!t.artwork),this.$el.toggleClass("no-info",!t.info),this.$el.toggleClass("no-transitions",m.Z.isOn(this.viewport,this.viewportWidth,this.viewerOptions)),this.$(".sc-info").css("color",t.artwork?"#fff":"#"+t.color),this.$(".sc-left").css("color","#"+t.color),this.$(".sc-button svg path").css("fill","#"+t.color))},tracksIsLoaded:function(t){if(this.tracks=null,this.audioEngine){var e=t.playerObj.tracks;if(!e.length)return this.$el.remove(),this.ready=!0,void this.readyCallback(this.parent);this.tracks=e,this.currentTrackNum=0,this.$el.removeClass("loading"),this.audioEngine.on("scPlayer:onAudioReady",this.onAudioReady).on("scPlayer:onMediaPlay",this.onMediaPlay).on("scPlayer:onMediaPause",this.onMediaPause).on("scPlayer:onMediaEnd",this.onMediaEnd).on("scPlayer:onMediaBuffering",this.onMediaBuffering),this.$elements={},this.$elements.scrubber=this.$(".sc-scrubber"),this.$elements.play_button=(0,n.Z)(this.$(".sc-button")),this.$elements.play_wrapper=this.$(".sc-button-wrapper"),this.$elements.buffer=this.$(".sc-buffer"),this.$elements.played=this.$(".sc-played"),this.$elements.time=this.$(".sc-left");var i=this.updateTrackInfo(this.currentTrackNum);if(this.$elements.play_button.on("click",this.onPlayClick),k.Z.isDesktop&&(this.$elements.scrubber.on("mousemove",this.onScrubberMouseMove),this.$elements.scrubber.on("click",this.onScrubberClick)),this.$(".sc-artwork-list").on("click",this.onPlayClick),k.Z.isDesktop&&this.$elements.play_button.RMDrag({move:this.moveHandleDrag,end:this.endHandleDrag,silent:!1,preventDefault:!0}),RM.screenshot)var s=(0,n.Z)("<img/>").load(r.Z.bind((function(){setTimeout(r.Z.bind((function(){this.ready=!0,!this.isDestroyed&&this.readyCallback(this.parent),s.remove()}),this),100)}),this)).attr("src",i);else this.ready=!0,this.readyCallback(this.parent)}},moveHandleDrag:function(t){this.playing&&this.pause(),this.isDragging=!0,this.$el.addClass("dragging"),this.scrub(t.pageX)},endHandleDrag:function(t){t.moved&&this.play(),this.$el.removeClass("dragging"),setTimeout(r.Z.bind((function(){this.isDragging=!1}),this),0)},onScrubberMouseMove:function(t){var e=(0,n.Z)(t.currentTarget),i=e.find(".sc-hover-indicator"),s=m.Z.getNormalizedBox(e.get(0),this.viewport,this.viewportWidth,this.viewerOptions),a=t.pageX-s.left;i.css("left",a/m.Z.getRatio(this.viewportWidth)+"px")},onScrubberClick:function(t){return this.playing||this.play(),this.scrub(t.pageX),!1},onPlayClick:function(t){if(!this.isDragging)return this.playing?this.pause():this.play(),t.stopPropagation(),!1},onAudioReady:function(){this.audioEngine&&this.audioEngine.play(),this.audioEngine&&this.audioEngine.setVolume(100)},onMediaPlay:function(){this.$el.addClass("playing"),this.playing=!0,clearInterval(this.positionPoll),this.positionPoll=setInterval(this.updatePlayState,500)},onMediaPause:function(){this.$el.removeClass("playing"),this.playing=!1,clearInterval(this.positionPoll),this.positionPoll=null},onMediaEnd:function(){this.$elements.played.css("width","0%"),this.$elements.play_button.css("left","0%"),this.$el.removeClass("playing"),this.playing=!1,this.audioEngine&&this.audioEngine.stop();var t=(this.currentTrackNum+1)%this.tracks.length;this.play(t),0==t&&(this.pause(),this.updateTrackInfo(0))},onMediaBuffering:function(t){this.$elements.buffer.css("width",t+"%")},play:function(t){if(this.tracks&&(null==t&&(t=this.currentTrackNum),this.audioEngine&&(!this.playing||t!=this.currentTrackNum))){var e=this.tracks[t];this.$el.addClass("playing"),this.playing=!0,t==this.currentTrackNum&&this.audioEngine.firstLoad?this.audioEngine&&this.audioEngine.play():(this.updateTrackInfo(t),this.currentTrackNum=t,this.audioEngine&&this.audioEngine.load(e,this.apiKey))}},pause:function(){this.audioEngine&&this.playing&&(this.$el.removeClass("playing"),this.playing=!1,this.audioEngine&&this.audioEngine.pause())},scrub:function(t){if(this.audioEngine){var e=m.Z.getNormalizedBox(this.$elements.play_wrapper.get(0),this.viewport,this.viewportWidth,this.viewerOptions),i=m.Z.getNormalizedBox(this.$elements.play_button.get(0),this.viewport,this.viewportWidth,this.viewerOptions),n=(t-e.left-i.width/2)/e.width;n=Math.min(Math.max(Math.min(n,.999),0),this.$elements.buffer.width()/this.$elements.scrubber.width()),this.$elements.play_button.css("left",Math.floor(this.$elements.play_wrapper.width()*n)+"px"),this.audioEngine&&this.audioEngine.seek(n)}},updatePlayState:function(){if(this.audioEngine){var t=this.audioEngine.getDuration(),e=this.audioEngine.getPosition(),i=e/t;this.$elements.played.css("width",100*i+"%"),this.$elements.play_button.css("left",Math.floor(this.$elements.play_wrapper.width()*i)+"px"),t&&this.$elements.time.html(this.timecode(t-e))}},updateTrackInfo:function(t){if(this.tracks){var e,i=this.tracks[t];this.$(".sc-info h3").html('<a target="_blank" href="'+i.permalink_url+'">'+i.title+"</a>"),this.$(".sc-info h4").html('by <a target="_blank" href="'+i.user.permalink_url+'">'+i.user.username+"</a>"),e=i.artwork_url?i.artwork_url.replace("-large","-t300x300"):i.user&&i.user.avatar_url?i.user.avatar_url.replace("-large","-t300x300"):this.defaultCover,this.$(".sc-artwork-list .sc-loaded-artwork").css("background-image",'url("'+e+'")'),this.$elements.time.html(this.timecode(i.duration));var n=(t+1)%this.tracks.length,s=(t-1+this.tracks.length)%this.tracks.length,a=this.tracks[n],r=this.tracks[s];return!a.preload&&a.artwork_url&&(a.preload=new Image,a.preload.src=a.artwork_url.replace("-large","-t300x300")),!r.preload&&r.artwork_url&&(r.preload=new Image,r.preload.src=r.artwork_url.replace("-large","-t300x300")),e}},loadTracksData:function(t){var e=0,i={tracks:[]},s=this;!function a(r){if(!s.isDestroyed){var o=s.scApiUrl(r.url);fetch(o).then((function(t){return t.json()})).then((function(l){s.isDestroyed||(e+=1,l.tracks?i.tracks=i.tracks.concat(l.tracks):l.duration?(l.permalink_url=r.url,i.tracks.push(l)):l.creator?t.push({url:l.uri+"/tracks"}):l.username?/favorites/.test(r.url)?t.push({url:l.uri+"/favorites"}):t.push({url:l.uri+"/tracks"}):n.Z.isArray(l)&&(i.tracks=i.tracks.concat(l)),t[e]?a(t[e]):s.tracksIsLoaded({playerObj:i,url:o}))})).catch((function(){!s.isDestroyed&&s.readyCallback(s.parent)}))}}(t[e])},scApiUrl:function(t){var e="https:"===document.location.protocol,i=(e||/^https/i.test(t)?"https":"http")+"://api.soundcloud.com/resolve?url=",n="format=json&client_id="+this.apiKey;return e&&(t=t.replace(/^http:/,"https:")),/api\./.test(t)?t+"?"+n:i+t+"&"+n},html5AudioAvailable:function(){var t=!1;try{var e=new Audio;t=e.canPlayType&&/maybe|probably/.test(e.canPlayType("audio/mpeg"))}catch(t){}return t},timecode:function(t){var e={h:Math.floor(t/36e5),m:Math.floor(t/6e4%60),s:Math.floor(t/1e3%60)},i=[];return e.h>0&&i.push(e.h),i.push(e.m<10&&e.h>0?"0"+e.m:e.m),i.push(e.s<10?"0"+e.s:e.s),i.join(":")},show:function(){this.$el&&this.$el.css("opacity",1)},destroy:function(){this.pause(),this.audioEngine&&this.audioEngine.off(),this.audioEngine&&this.audioEngine.destroy(),this.audioEngine=null,this.$el&&this.$el.remove()}}),M=a().View.extend({initialize:function(t,e){r.Z.bindAll(this),this.inner_template=b["template-common-audio-player-engine-html5"],this.parent=e,this.$container=t,this.firstLoad=!1;var i=this;this.callbacks={onReady:function(){i.player&&i.trigger("scPlayer:onAudioReady")},onPlay:function(){i.player&&i.trigger("scPlayer:onMediaPlay")},onPause:function(){i.player&&i.trigger("scPlayer:onMediaPause")},onEnd:function(){i.player&&i.trigger("scPlayer:onMediaEnd")},onBuffer:function(t){i.player&&i.trigger("scPlayer:onMediaBuffering",t)}},this.render()},render:function(){this.setElement((0,n.Z)(this.inner_template({}))),this.$container.append(this.$el),this.player=this.$el.find("audio")[0],this.player.addEventListener("play",this.callbacks.onPlay,!1),this.player.addEventListener("pause",this.callbacks.onPause,!1),this.player.addEventListener("timeupdate",this.onTimeUpdate,!1),this.player.addEventListener("progress",this.onProgress,!1)},onTimeUpdate:function(t){if(this.player){var e=(this.player.buffered.length&&this.player.buffered.end(0))/this.player.duration*100;this.callbacks.onBuffer(e),this.player.currentTime===this.player.duration&&this.callbacks.onEnd()}},onProgress:function(t){if(this.player){var e=(this.player.buffered.length&&this.player.buffered.end(0))/this.player.duration*100;this.callbacks.onBuffer(e)}},load:function(t,e){this.player&&(this.firstLoad=!0,this.player.pause(),this.player.src=t.stream_url+(/\?/.test(t.stream_url)?"&":"?")+"client_id="+e,this.player.load(),this.player.play())},play:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},stop:function(){this.player&&this.player.currentTime&&(this.player.currentTime=0,this.player.pause())},seek:function(t){if(this.player&&this.player.src)try{this.player.currentTime=this.player.duration*t}catch(t){}},getDuration:function(){return this.player?1e3*this.player.duration:0},getPosition:function(){return this.player?1e3*this.player.currentTime:0},setVolume:function(t){this.player&&(this.player.volume=t/100)},destroy:function(){this.$el.remove(),this.player=null}}),C=a().View.extend({initialize:function(t,e){r.Z.bindAll(this),this.inner_template_flash=b["template-common-audio-player-engine-flash"],this.inner_template_flash_ie=b["template-common-audio-player-engine-flash-ie"],this.parent=e,this.$container=t,this.firstLoad=!1;var i=this;this.callbacks={onReady:function(){i.player&&i.trigger("scPlayer:onAudioReady")},onPlay:function(){i.player&&i.trigger("scPlayer:onMediaPlay")},onPause:function(){i.player&&i.trigger("scPlayer:onMediaPause")},onEnd:function(){i.player&&i.trigger("scPlayer:onMediaEnd")},onBuffer:function(t){i.player&&i.trigger("scPlayer:onMediaBuffering",t)}}},render:function(t){var e="soundcloud_"+this.parent.parent.params._id,i=("https:"===document.location.protocol?"https":"http")+"://player.soundcloud.com/player.swf?url="+t+"&amp;enable_api=true&amp;player_type=engine&amp;object_id="+e;Modernizr.msie?this.setElement((0,n.Z)(this.inner_template_flash_ie({id:e,swf:i}))):this.setElement((0,n.Z)(this.inner_template_flash({id:e,swf:i}))),this.$container.append(this.$el),this.$el.find("object").on("soundcloud:onPlayerReady",r.Z.bind((function(t,i){this.player=l.getPlayer(e),this.callbacks.onReady()}),this)).on("soundcloud:onMediaBuffering",r.Z.bind((function(t,e){this.callbacks.onBuffer(e.percent)}),this)).on("soundcloud:onMediaEnd",this.callbacks.onEnd).on("soundcloud:onMediaPlay",this.callbacks.onPlay).on("soundcloud:onMediaPause",this.callbacks.onPause)},load:function(t){this.firstLoad?this.player&&this.player.api_load(t.uri):(this.firstLoad=!0,this.render(t.uri))},play:function(){this.player&&this.firstLoad&&this.player.api_play()},pause:function(){this.player&&this.firstLoad&&this.player.api_pause()},stop:function(){this.player&&this.firstLoad&&this.player.api_stop()},seek:function(t){this.player&&this.firstLoad&&this.player.api_seekTo(this.player.api_getTrackDuration()*t)},getDuration:function(){return this.player&&this.firstLoad&&this.player.api_getTrackDuration&&1e3*this.player.api_getTrackDuration()},getPosition:function(){return this.player&&this.firstLoad&&this.player.api_getTrackPosition&&1e3*this.player.api_getTrackPosition()},setVolume:function(t){this.player&&this.player.api_setVolume&&this.player.api_setVolume(t)},destroy:function(){this.player=null,this.$el&&this.$el.remove()}}),T=E},1014:function(t,e,i){"use strict";i.r(e);var n=i(1012),s=i(340),a=i(1015),r=i(323),o=n.Z.extend({render:function(){return this.makeBox("audio"),this.player=new a.Z({params:this,$container:this.$el,readyCallback:this.widgetIsLoaded,viewport:this.page.pageViewport,viewportWidth:this.mag.getViewportWidth(this.page.pageViewport),viewerOptions:this.mag.viewOpts}),this.player.show(),this.rendered=!0,this},isValid:function(){return this.parsed_url},start:function(){return this.started=!0,!RM.screenshot&&!this.destroyed&&this.player&&this.autoplay&&this.rendered&&this.loaded&&r.Z.isDesktop&&!s.default.PageVisibilityManager.isPageHidden()&&this.player.play(),this},stop:function(){return this.started=!1,!RM.screenshot&&!this.destroyed&&this.player&&this.rendered&&this.loaded&&this.player.pause(),this},destroy:function(){return this.player&&this.player.destroy(),this.player=null,n.Z.prototype.destroy.apply(this,arguments)}});e.default=o}}]);